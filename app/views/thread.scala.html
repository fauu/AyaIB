@(board: entities.Board, thread: entities.Thread, singleThreadView: Boolean = false)

@postHeader(post: entities.Post, isOp: Boolean) = {
  <header>
    <span class="poster-name">
      Anonymous
    </span> ·
    <a class="no" href="@routes.BoardController.showThread(board.name, thread.op.no)#post-@post.no">
      #@post.no
    </a>
    @if(isOp && !singleThreadView) {
      · <a class="reply-link" href="@routes.BoardController.showThread(board.name, thread.op.no)">Reply</a>
    }
  </header>
}

@file(post: entities.Post) = {
  @defining(post.fileMetadata.get) { metadata =>
    <aside class="file-info">
      <a href="@routes.FileController.get(name = post.fileName.get, thumbnail = false)">@metadata.originalName</a>
      (@metadata.size · @metadata.dimensions)
    </aside>
  }
  <a href="@routes.FileController.get(name = post.fileName.get, thumbnail = false)">
    <img src="@routes.FileController.get(name = post.thumbnailName.get, thumbnail = true)" />
  </a>
}

<article class="thread">
  @postHeader(post = thread.op, isOp = true)
  @file(post = thread.op)
  @for(post <- thread.op :: thread.replies) {
    <article id="post-@post.no" class="post">
      @if(post != thread.op) { <aside class="indicator">>></aside> }
      <section class="body">
        @if(post != thread.op) {
          @postHeader(post, isOp = false)
          @post.fileMetadata match {
            case Some(metadata) => { @file(post) }
            case None => {}
          }
        }
        <blockquote class="content">
          @post.content
        </blockquote>
      </section>
    </article>
  }
</article>
